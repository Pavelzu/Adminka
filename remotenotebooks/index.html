<title>Adminka</title>
<style>p {
  ;
 } .label{margin-left: 30px;margin-bottom: -10; display: inline;line-height: 0.1;}.input{margin-left: 20px;margin-bottom: 0;display: inline;line-height: 0.1;}.radios{margin-left: 30px;}.my_button {
    width: 90px;
    height: 30px;
	margin-left: 160px;
  }.h1 { margin-bottom: 0;margin-left: 30px;display: inline;line-height: 0.9;}.h6 { margin-bottom: 0;margin-left: 30px;display: inline;}</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <meta charset="UTF-8">
<h6>todo: <br>
autodopisivanie user<br>
auto config remote host by user<br>
current peers list<br>
rename main l2tp connection to ...Osnova
add command to ipsec-psk
button for download the 1st script <br>
</h6>
<input type="hidden" id="raknagore" name="raknagore" value = "5"> 
   
<a href="./force73update.php"> Force 7.3 update </a><br><br>
	
	<form id="oldWG">
	<h1 class="h1"> Config WG Notebook For User<br> </h1>
	<h6 class="h6"> (+Remmina +Remmina Config +Anydesk +WG +Peer +Fallover -L2TP Packages -VPN Configs)<br><br><br></h6>
	<label class="label">Current Notebook IP*</label> 
	<input class="input" type="text" name="ip" value="" size= 15><br><br>
	<label class="label">User* </label> 
	<input class="input" type="text" name="login" value="" size= 15><br><br>
 	<label class="label">Remote Host to Connect* </label> 
	<input class="input" type="text" name="dst" value="" size= 15> <label>.domen.ru</label>  <br><br>
    <input class="radios" type="radio" name="mask" checked value="32">Only one IP(/32)
    <input type="radio" name="mask" value="24">Full subnet (/24)<br><br>
    <input class="radios" type="radio" name="time" checked value="worktime">8:00-20:00
    <input type="radio" name="time" value="fulltime">Full Access<br><br>
	<label class="label">Days </label> 
	<input class="input" type="text" name="date" value="" size= 45><br><br>
	<h6 class="h6"> Examples: 1) 2,8,11,12.3 (2,8,11,12 March)   2) 1-10.6;3,5.7 (1-10 June and 3,5 July) 3) 5.2 (5 February) <br> 4) *.6-7 (all days in June and July) 
		5) 1-3.1-12 (the first, second and third day in every mounth) <br><br><br></h6>
	<label class="label">Comment to Peer </label> 
	<input class="input" type="text" name="comment" value="" size= 35><br><br>

	<input class="my_button" type="submit" width = 100 name="sendbtnWG" value="Send" ><br>
		<br>
	</form>
	

	
	<form id="newL2TP">
	<h1 class="h1"> Config L2TP Notebook<br> </h1>
    <h6 class="h6"> (+L2TP Packages +VPN Configs +Remmina +Anydesk -Wireguard !!! NO remmina connection, NO pass and preshared key in VPN-configs !!!)<br><br><br></h6>
	<label class="label">Current Notebook IP</label> 
	<input type="text" name="ip" value="" size= 15><br><br>
	<!---<label class="label">User </label> 
	<input type="text" name="login" value="" size= 15><br><br>
 	<label class="label">Remote Host to Connect </label> 
	<input type="text" name="host" value="" size= 15><br><br> 

      <input class="input" type="radio" name="optradio" checked>Only one IP(/32)
      <input type="radio" name="optradio">Full subnet (/24)<br><br>
    
	<label class="label">Comment to Peer </label> 
	<input type="text" name="comment" value="" size= 15><br><br>
     --->
	<input class="my_button" type="submit" width = 100 name="sendbtnnewL2TP" value="Send" >
		<br>
	</form>
	<br>
	<div id="postform"></div>

<br>
	


<script>
$("#newL2TP").on("submit", function(){
	var myButton = document.getElementsByName('sendbtnnewL2TP')[0];
	myButton.setAttribute('disabled', '');
	var flagfield = document.getElementById("raknagore");
	flagfield.value = '6';
	
	$.ajax({

		url: 'handlerL2TP.php',
		method: 'post',
		dataType: 'html',
		data: $(this).serialize(),
		success: function(data){
			var flagfield = document.getElementById("raknagore");
			flagfield.value = 'stop';
			alert(data);
			myButton.removeAttribute('disabled');
			

		}

	});

	
	var set_delay = 100,
    callout = function () {
        $.ajax({
            url: 'hndl.php',
			method: 'post',
			dataType: 'html',
			data: $(this).serialize(),
			success: function(data){
			var f = document.getElementById("raknagore").value;
			if (f=="stop")
				{
				set_delay = 99999999;
				//alert("Работа скрипта окончена");
				}	
			$('#postform').html(data);
		}

        })
        .always(function () {
            setTimeout(callout, set_delay);
        });
    };
	callout();
	
	return false;

});
</script>

<script>
$("#oldWG").on("submit", function(){
	var myButton = document.getElementsByName('sendbtnWG')[0];
	myButton.setAttribute('disabled', '');
	var flagfield = document.getElementById("raknagore");
	flagfield.value = '6';
	
	$.ajax({

		url: 'handlerWG.php',
		method: 'post',
		dataType: 'html',
		data: $(this).serialize(),
		success: function(data){
			var flagfield = document.getElementById("raknagore");
			flagfield.value = 'stop';
			alert(data);
			myButton.removeAttribute('disabled');
			

		}

	});
	
	
	var set_delay = 100,
    callout = function () {
        $.ajax({
            url: 'hndl.php',
			method: 'post',
			dataType: 'html',
			data: $(this).serialize(),
			success: function(data){
			var f = document.getElementById("raknagore").value;
			if (f=="stop")
				{
				set_delay = 99999999;
				//alert("Работа скрипта окончена");
				}	
			$('#postform').html(data);
		}

        })
        .always(function () {
            setTimeout(callout, set_delay);
        });
    };
	callout();
	
	
	return false;

});
</script>



